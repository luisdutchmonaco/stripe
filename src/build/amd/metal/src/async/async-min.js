define(["exports","../coreNamed"],function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={};t.throwException=function(e){t.nextTick(function(){throw e})},t.run=function(e,n){t.run.workQueueScheduled_||(t.nextTick(t.run.processWorkQueue),t.run.workQueueScheduled_=!0),t.run.workQueue_.push(new t.run.WorkItem_(e,n))},t.run.workQueueScheduled_=!1,t.run.workQueue_=[],t.run.processWorkQueue=function(){for(;t.run.workQueue_.length;){var e=t.run.workQueue_;t.run.workQueue_=[];for(var n=0;n<e.length;n++){var o=e[n];try{o.fn.call(o.scope)}catch(u){t.throwException(u)}}}t.run.workQueueScheduled_=!1},t.run.WorkItem_=function(e,n){this.fn=e,this.scope=n},t.nextTick=function(e,o){var u=e;o&&(u=e.bind(o)),u=t.nextTick.wrapCallback_(u),t.nextTick.setImmediate_||("function"==typeof setImmediate&&(0,n.isServerSide)({checkEnv:!1})?t.nextTick.setImmediate_=setImmediate:t.nextTick.setImmediate_=t.nextTick.getSetImmediateEmulator_()),t.nextTick.setImmediate_(u)},t.nextTick.setImmediate_=null,t.nextTick.getSetImmediateEmulator_=function(){var e=void 0;if("function"==typeof MessageChannel&&(e=MessageChannel),"undefined"==typeof e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&(e=function(){var e=document.createElement("iframe");e.style.display="none",e.src="",e.title="",document.documentElement.appendChild(e);var n=e.contentWindow,t=n.document;t.open(),t.write(""),t.close();var o="callImmediate"+Math.random(),u=n.location.protocol+"//"+n.location.host,r=function(e){e.origin!==u&&e.data!==o||this.port1.onmessage()}.bind(this);n.addEventListener("message",r,!1),this.port1={},this.port2={postMessage:function(){n.postMessage(o,u)}}}),"undefined"!=typeof e){var n=new e,t={},o=t;return n.port1.onmessage=function(){t=t.next;var e=t.cb;t.cb=null,e()},function(e){o.next={cb:e},o=o.next,n.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(e){var n=document.createElement("script");n.onreadystatechange=function(){n.onreadystatechange=null,n.parentNode.removeChild(n),n=null,e(),e=null},document.documentElement.appendChild(n)}:function(e){setTimeout(e,0)}},t.nextTick.wrapCallback_=function(e){return e},e["default"]=t});